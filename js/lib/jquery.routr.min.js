/*
 * jQuery routr - v1.0.1-alpha1
 * Javascript Router
 *
 * Copyright (c) 2016 Samuel Weru
 * Released under the MIT license
 */
String.prototype.test=function(a){return new RegExp(a).test(this.toString())},function(a){window.Routr=function(){this.options=a.extend({},{routes:[],aliases:[],current:"",_useHashStateChange:!1})},window.Routr.prototype={constructor:Routr,add:function(b,c,d){"function"==typeof c&&(d=c,c=void 0),void 0===c&&(c="route".concat(Object.keys(this.options.routes).length)),void 0===this.options.routes[b]&&(this.options.routes[b]=[]);var e=[],f=[];b.match(/\{/)&&(e=b.split("/"),a.each(e,function(a,b){var c=b.match(/\{(\w+)(?:\:(int|float|date|string|bool)\}|\})/i);if(c)switch(c[1]||c[2]){case"int":f.push("[0-9]+");break;case"float":f.push("[+-]?d+(.d+)?");break;case"date":f.push("[0-9]{4}-(1[0-2]|0[1-9]|[1-9])-([0-9]|0[1-9]|[1-2][0-9]|3[0-1])");break;case"string":f.push("[A-Za-z0-9]+");break;case"bool":f.push("(true|false)")}else f.push(b)})),this.options.aliases[c]=b,this.options.routes[b]={route:b,callback:d,alias:c,pattern:f.join("/")}},remove:function(a){var b=this.options.routes[a].alias;delete this.options.aliases[b],delete this.options.routes[a]},execute:function(b){if(this.options.current=b,void 0===this.options.routes[b]){var c=this.options;a.each(Object.keys(c.routes),function(a,d){var e=[],f=c.routes[d].pattern;if(b.test("^".concat(f.concat("$")))){var i,g=d.split("/"),h=b.split("/");for(i in g)g[i]!=h[i]&&e.push(h[i]);return e.length&&c.routes[d].callback.apply(this,e),!1}})}else this.options.routes[b].callback();this.options._useHashStateChange&&(window.location.hash=this.options.current)},run:function(){if(this.options._useHashStateChange=!0,Object.keys(this.options.routes).length){var b=this;a(window).bind("hashchange",function(){b.execute(window.location.hash.replace(/#\/|#/g,""))})}var c=window.location.hash.replace(/#\/|#/g,"");c&&this.execute(c)}}}(jQuery);