/*
 * jQuery routr - v0.9 beta
 * Javascript Router
 *
 * Copyright (c) 2014 Samuel Weru
 * Released under the MIT license
 */
String.prototype.test=function(t){return new RegExp(t).test(this.toString())},function(t){t.routr=t.extend({},{routes:[],aliases:[],current:""}),t.routr.add=function(r,e,o){"function"==typeof e&&(o=e,e=void 0),void 0===e&&(e="route".concat(Object.keys(t.routr.routes).length)),void 0===t.routr.routes[r]&&(t.routr.routes[r]=[]);var u=[],a=[];r.match(/\{/)&&(u=r.split("/"),t.each(u,function(t,r){var e=r.match(/\{(\w+)(?:\:(int|float|date|string|bool)\}|\})/i);if(e)switch(e[1]||e[2]){case"int":a.push("[0-9]+");break;case"float":a.push("[+-]?d+(.d+)?");break;case"date":a.push("[0-9]{4}-(1[0-2]|0[1-9]|[1-9])-([0-9]|0[1-9]|[1-2][0-9]|3[0-1])");break;case"string":a.push("[A-Za-z0-9]+");break;case"bool":a.push("(true|false)")}else a.push(r)})),t.routr.aliases[e]=r,t.routr.routes[r]={route:r,callback:o,alias:e,pattern:a.join("/")}},t.routr.remove=function(r){var e=t.routr.routes[r].alias;delete t.routr.aliases[e],delete t.routr.routes[r]},t.routr.execute=function(r){t.routr.current=r,void 0===t.routr.routes[r]?t.each(Object.keys(t.routr.routes),function(e,o){var u=[],a=t.routr.routes[o].pattern;if(r.test("^".concat(a.concat("$")))){var n,s=o.split("/"),c=r.split("/");for(n in s)s[n]!=c[n]&&u.push(c[n]);return u.length&&t.routr.routes[o].callback.apply(this,u),!1}}):t.routr.routes[r].callback(),window.location.hash=t.routr.current},t.routr.run=function(){Object.keys(t.routr.routes).length&&t(window).bind("hashchange",function(){t.routr.execute(window.location.hash.replace(/#\/|#/g,""))});var r=window.location.hash.replace(/#\/|#/g,"");r&&t.routr.execute(r)}}(jQuery);
